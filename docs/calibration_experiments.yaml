# edit: neo15

experiments:
  - name: RO line spectroscopy
    id: ro-roline-spec
    measure_type: ensemble_avg
    stage: RO_resonator
    assumptions: |
      Chip is connected and readout line is accessible.
    sweep:
      - readout frequency
    monitor:
      - readout signal strength
    procedure: |
      - Sweep the readout frequency across a predefined range while monitoring the readout signal strength.
      - Optionally adjust the coupler bias or readout signal power to improve signal clarity.
      - Identify peaks in the response amplitude to locate resonances.
    post_operations: |
      Label each peak with the corresponding resonator according to the manufacturer's design.

  - name: RO resonator spectroscopy
    id: ro-resonator-spec
    measure_type: ensemble_avg
    stage: RO_resonator
    assumptions: |
      Already know the approximate value of the readout resonator's frequency.
    sweep:
      - readout frequency
      - Z-line bias
    monitor:
      - readout signal amplitude
      - readout signal phase
    procedure: |
      - Apply a microwave pulse to the readout resonator
      - Pad the readout signal with a vairable Z-line bias
      - Sweep the readout frequency around the approximate resonator frequency
      - Sweep the Z-line bias to find the flux insensitive point
    post_operations: |
      Update drive frequency
      Update Z-line bias

  - name: qubit f01 spectroscopy
    id: f01-spec
    measure_type: ensemble_avg
    stage: qubit
    assumptions: |
      Readout frequency is calibrated; qubit is properly biased.
    sweep:
      - drive amplitude
      - Z-line bias
    monitor:
      - readout signal strength
    procedure: |
      - Pick a desired drive frequency in the tunable band
      - Pad the drive pulse with a variable Z-line bias
      - Apply a readout signal to the resonator
      - Sweep the drive amplitude and Z-line bias
      - Monitor the readout signal strength
    post_operations: |
      Update the Z-line bias to align with the desired drive frequency

  - name: rabi for drive amplitude
    id: rabi-amp
    measure_type: ensemble_avg
    stage: qubit
    assumptions: |
      Qubit transition frequency is assured by the updated Z-line bias.
    sweep:
      - drive pulse amplitude
    monitor:
      - readout signal strength
    procedure: |
      - Drive the qubit with pulses of varying amplitudes
      - Apply DRAG correction to the drive pulse
      - Apply a readout signal to the resonator
      - Observe oscillations in the strength to determine the optimal π-pulse amplitude.
    post_operations: |
      Update the π-pulse amplitude in the registry
      Update the π/2-pulse amplitude in the registry

  - name: RO frequency
    id: ro-freq
    measure_type: ensemble_avg
    stage: RO_resonator
    assumptions: |
      We can drive the qubit to |1⟩ state with high fidelity
    sweep:
      - readout frequency
    monitor:
      - SNR
    procedure: |
      - Apply a trivial pulse or a π-pulse to the qubit, respectively
      - Measure the readout signal strength
      - Calculate the SNR
      - Sweep the readout frequency
      - Select the readout frequency with the highest SNR as operating frequency
    post_operations: |
      Update the readout frequency in the registry

  - name: RO amplitude
    id: ro-amp
    measure_type: single_shot
    stage: RO_resonator
    assumptions: |
      Readout frequency is already set for maximal SNR
    procedure: |
      - Apply a trivial pulse or a π-pulse to the qubit, respectively
      - Measure the readout signal strength
      - Plot the state population as a function of the readout amplitude
      - Select the readout amplitude with best readout
    post_operations: |
      Update the readout amplitude in the registry

  - name: ramsey (inaccurate)
    id: ramsey-inaccurate
    measure_type: ensemble_avg
    stage: qubit
    assumptions: |
      - We have π-pulses and we use half its amplitude for π/2-pulses
      - We can distinguish |0⟩, |1⟩ and higher states
    sweep:
      - delay between π/2 pulses
    monitor:
      - "|0⟩ state population"
    procedure: |
      - Apply two π/2 pulses separated by a variable delay to the qubit.
      - Monitor the oscillations in the qubit population to measure the dephasing time T2* and frequency offset.
      - Optionally adjust the z bias to perform a ZPA scan.
    post_operations: |
      - Update the qubit frequency
      - Update T2* in the registry

  - name: IQ scatter (after ramsey)
    id: iq-scatter-after-ramsey
    measure_type: single_shot
    stage: qubit
    assumptions: |
      Qubit transition frequency is approximately known.
    procedure: |
      - Drive the qubit with a π-pulse or do nothing and then measure the readout signal strength.
      - Perform clustering on the I/Q data to identify the |0⟩ and |1⟩ states.
      - Calculate the readout matrix.
    post_operations: |
      Update the I/Q center and readout matrix in the registry.

  - name: measurement fidelity
    id: meas-fid
    measure_type: single_shot
    stage: qubit
    assumptions: |
      IQ state clusters for |0⟩ and |1⟩ are separable.
    procedure: |
      Prepare the qubit in |0⟩ and |1⟩ states repeatedly and measure the assignment error.
    post_operations: |
      Update the readout fidelity metrics in the registry.

  - name: f12 spectroscopy
    id: f12-spec
    measure_type: ensemble_avg
    stage: qubit
    assumptions: |
      Qubit is calibrated up to |1⟩ state; sufficient anharmonicity.
    sweep:
      - drive frequency near |1⟩→|2⟩
    monitor:
      - population in |2⟩ or dispersive shift
    procedure: |
      - Drive the qubit from the |1⟩ state to the |2⟩ state by sweeping the drive frequency near the |1⟩→|2⟩ transition.
      - Monitor the population in the |2⟩ state or the dispersive shift to locate the transition.
    post_operations: |
      Update the |1⟩→|2⟩ transition frequency in the registry.

  - name: one-qubit gate calibration
    id: 1q-cal
    measure_type: ensemble_avg
    stage: 1qb_gate
    assumptions: |
      Qubit transition frequency and π-pulse duration are known.
    sweep:
      - π pulse amplitude
      - virtual Z angle
      - detuning for phase adjustment
    monitor:
      - final qubit state fidelity
    procedure: |
      - Fine-tune the single-qubit gate parameters, including amplitude, detuning, and phase shift.
      - Perform experiments to optimize the π and π/2 pulses for high-fidelity quantum operations.
    post_operations: |
      Update the single-qubit gate parameters in the registry.

graph:
  ro-roline-spec: [ro-resonator-spec]
  ro-resonator-spec: [f01-spec]
  f01-spec: [rabi-amp]
  rabi-amp: [ro-freq]
  ro-freq: [ro-amp]
  ro-amp: [ramsey-inaccurate]
  ramsey-inaccurate: [iq-scatter-after-ramsey]
  iq-scatter-after-ramsey: [meas-fid]
  meas-fid: [f12-spec, 1q-cal]
  f12-spec: [1q-cal]
  1q-cal: [meas-fid]
